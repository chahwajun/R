View(x2)
x2
library(tidyverse)
x2
str(x2)
x2$a
str(Theoph)
x5 <- list(1, list(2, list(3, list(4, list(5)))))
x5
x4 <- c(list(1, 2), list(3, 4))
str(x4)
str(x5)
View(x5)
df <- tibble(
x = 1:2,
y = c("a", "b"),
z = list(list(1, 2), list(3, 4, 5))
)
View(df)
View(df[[3]][[1]])
View(df[[3]][[2]])
df6 <- tribble(
~x, ~y,
"a", list(1, 2),
"b", list(3),
"c", list()
)
df4 <- tribble(
~x, ~y,
"a", list(1),
"b", list("a", TRUE, 5)
)
View(df4)
df4 |>
unnest_longer(y)
View(df4 |>
unnest_longer(y)
)
View(df4 |>
unnest_longer(y)
)
df4 |>
unnest_longer(y) |>
mutate(y = as.character(y))
View(df4 |>
unnest_longer(y)
)
df4 <- tribble(
~x, ~y,
"a", list(1),
"b", list("a", TRUE, 5)
)
View(df4 |>
unnest_longer(y)
)
gh_repos
repos <- tibble(json = gh_repos)
library(jsonlite)
library(tidyverse)
library(repurrrsive)
install.packages('repurrrsive')
library(repurrrsive)
repos <- tibble(json = gh_repos)
View(repos)
View(repos[[1]][[1]])
View(repos)
View(repos[[1]][[2]])
View(repos[[1]][[1]])
repos |>
unnest_longer(json)
repos |>
unnest_longer(json) |>
unnest_wider(json)
repos |>
unnest_longer(json) |>
unnest_wider(json) |>
select(id, full_name, owner, description)
gh_users2 <- read_json(gh_users_json())
View(gh_users2)
?sample
sample(c(NA, TRUE), 10, replace = TRUE)
sample(c(NA, asdf), 10, replace = TRUE)
sample(c(NA, 'asdf'), 10, replace = TRUE)
## 26. Functions ----
library(tidyverse)
library(nycflights13)
?range
rng <- range(x, na.rm = TRUE, finite = TRUE)
x <- (rnorm(10)
x <- (rnorm(10))
x <- (rnorm(10))
str_view(x)
rng <- range(x, na.rm = TRUE, finite = TRUE)
rng
rng(1)
rng[1]
range(1:100)
x <- range(1:100)
x
str_view(x)
?str_sub
library(tidyverse)
library(nycflights13)
library(tidyverse)
library(nycflights13)
fix_na <- function(x) {
if_else(x %in% c(997, 998, 999), NA, x)
}
x <- c(1:100)
x <- c(1:1000)
fix_na(x)
fix_na(x) |>
tail()
mape <- function(actual, predicted) {
sum(abs((actual - predicted) / actual)) / length(actual)
}
library(tidyverse)
library(nycflights13)
filter_severe <- function(df, vars, vars2){
df |>
filter(is.na({{vars}} | {{vars2}}>= 60)) |>
summarize(n = n(), .by = dest )
}
View(flights |>
filter_severe(arr_time, dep_delay)
)
summari_weather <- function(df, vars, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}), .by = vars)
}
summarize_weather <- function(df, vars, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}), .by = vars)
}
weather |>
summari_weather(origin, temp)
View(weather)
View(weather)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
weather |>
summarize_weather(origin, temp)
summarize_weather(weather$origin, weather$temp)
summarize_weather(weather, weather$origin, weather$temp)
summarize_weather(weather,origin, temp)
weather |>
summarize_weather(origin)
weather |>
summarize_weather(origin, dewp)
summarize_weather <- function(df, vars, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}, na.rm = TRUE), .by = vars)
}
weather |>
summarize_weather(origin, temp)
summarize_weather <- function(df, vars, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}, na.rm = TRUE), .by = {{vars}})
}
weather |>
summarize_weather(origin, temp)
summarize_weather <- function(df, vars, vars2){
rng <- range(df{{vars2}}, na.rm = TRUE)
summarize_weather <- function(df, vars, vars2){
rng <- range(df${{vars2}}, na.rm = TRUE)
summarize_weather <- function(df, vars, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}, na.rm = TRUE), .by = {{vars}})
}
flights |>
summarize_weather(origin, arr_time)
flights |>
summarize_weather(origin, arr_time)
summarize_weather <- function(df, vars2){
rng <- range({{vars2}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars2}}, na.rm = TRUE), .by = origin)
}
weather |>
summarize_weather(temp)
weather |>
summarize_weather(temp)
View(weather)
flights |>
summarize_weather(arr_time)
flights |>
summarize_weather(arr_delay)
weather |>
summarize_weather(temp)
summarize_weather <- function(df, vars){
rng <- range({{vars}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = origin)
}
weather |>
summarize_weather(temp)
summarize_weather <- function(df, vars){
rng <- range({{vars}}, na.rm = TRUE)
df |>
mutate(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = origin)
}
weather |>
summarize_weather(temp)
summarize_weather <- function(df, vars){
rng <- range({{vars}}, na.rm = TRUE)
df |>
mutate(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = origin)
}
summarize_weather <- function(df, vars){
rng <- range({{vars}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = origin)
}
summarize_weather <- function(df, vars){
rng <- range({{vars}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = origin)
}
weather |>
summarize_weather(temp)
library(weather)
flights |>
summarize_weather(arr_delay)
View(summari_weather)
View(summari_weather)
View(summarize_weather)
summarize_weather <- function(df, vars, vars2){
rng <- range({{vars}}, na.rm = TRUE)
df |>
summarize(minimum = rng[1],
maximum = rng[2],
mean = mean({{vars}}, na.rm = TRUE), .by = {{vars}})
}
weather |>
summarize_weather(temp, origin)
weather |>
summarize_weather(humid, origin)
summarize_weather <- function(df, vars, vars2){
df |>
summarize(minimum = min({{vars}}),
maximum = max({{vars}}),
mean = mean({{vars}}, na.rm = TRUE), .by = {{vars}})
}
weather |>
summarize_weather(humid, origin)
weather |>
summarize_weather(temp, origin)
summarize_weather <- function(df, vars, vars2){
df |>
summarize(minimum = min({{vars}}),
maximum = max({{vars}}),
mean = mean({{vars}}, na.rm = TRUE), .by = {{vars2}})
}
weather |>
summarize_weather(temp, origin)
summarize_weather <- function(df, vars, vars2){
df |>
summarize(minimum = min({{vars}}, na.rm = TRUE),
maximum = max({{vars}} , na.rm = TRUE),
mean = mean({{vars}}, na.rm = TRUE), .by = {{vars2}})
}
weather |>
summarize_weather(temp, origin)
flights
?make_datetime()
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
standarize_time <- function(df, vars){
df |>
mutate({{vars}} := make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate({{vars}} := make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
standarize_time <- function(df, vars){
df |>
mutate({{vars}} := make_datetime(hour := {{vars}}%/% 100,
minute := {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df %>%
mutate(!!vars := make_datetime(hour = .data[[vars]] %/% 100,
minute = .data[[vars]] %% 100)
)
}
flights |>
standarize_time(sched_dep_time)
flights |>
standarize_time(sched_dep_time)
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate({{vars}} := make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate({{vars}} = make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
View(standarize_time)
standarize_time <- function(df, vars){
df |>
mutate({{vars}} := make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(year = 2013, hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df %>%
mutate(real_time = make_datetime(year = 2013,
hour = !!sym(vars) %/% 100,
minute = !!sym(vars) %% 100)
)
}
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df %>%
mutate(real_time = make_datetime(hour = !!sym(vars) %/% 100,
minute = !!sym(vars) %% 100)
)
}
flights |>
standarize_time(sched_dep_time)
library(tidyverse)
library(nycflights13)
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(hour = {{vars}}%/% 100,
minute = {{vars}}%% 100)
)
}
flights |>
standarize_time(sched_dep_time)
flights |>
standarize_time(sched_arr_time)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(hour = {{vars}}%/% 100,
)
)
}
flights |>
standarize_time(sched_arr_time)
View(flights |>
standarize_time(sched_arr_time)
)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(year = year, month = month,
day = day, hour = {{vars}}%/% 100,
)
)
}
View(flights |>
standarize_time(sched_arr_time)
)
View(flights |>
standarize_time(sched_dep_time)
)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(year = year, month = month,
day = day, hour = {{vars}} %/% 100,
minute = {{vars}} %% 100
)
)
}
View(flights |>
standarize_time(sched_dep_time)
View(flights |>
flights |>
standarize_time(sched_dep_time)
standarize_time <- function(df, vars){
df |>
mutate(real_time = make_datetime(year = year, month = month,
day = day, hour = {{vars}} %/% 100,
min = {{vars}} %% 100
)
)
}
flights |>
standarize_time(sched_dep_time)
View(flights |>
standarize_time(sched_dep_time)
)
weather |>
summarize_weather(temp, origin)
